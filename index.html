<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NHM Z PROFORMA INVOICE GENERATOR </title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text">
            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" x2="8" y1="13" y2="13"/>
            <line x1="16" x2="8" y1="17" y2="17"/>
            <line x1="10" x2="8" y1="9" y2="9"/>
          </svg>
          <h1>NHM COMPANY LIMITED</h1>
        </div>
        <nav class="main-nav">
          <button id="nav-invoices" class="nav-btn active">Invoices</button>
          <button id="nav-clients" class="nav-btn">Clients</button>
          <button id="nav-settings" class="nav-btn">Settings</button>
        </nav>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container">
      <!-- Invoices View -->
      <section id="invoices-view" class="view">
        <div class="section-header">
          <h2>Invoices</h2>
          <div class="actions">
            <button id="create-invoice-btn" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus">
                <path d="M5 12h14"/>
                <path d="M12 5v14"/>
              </svg>
              New Invoice
            </button>
            <button id="import-invoices-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" x2="12" y1="15" y2="3"/>
              </svg>
              Import
            </button>
            <button id="export-invoices-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-upload">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" x2="12" y1="3" y2="15"/>
              </svg>
              Export
            </button>
          </div>
        </div>
        
        <div class="invoice-list-container">
          <div id="invoice-list" class="invoice-list">
            <!-- Invoices will be dynamically populated here -->
            <p id="no-invoices-message" class="empty-message">No invoices yet. Create your first invoice!</p>
          </div>
        </div>
      </section>

      <!-- Clients View -->
      <section id="clients-view" class="view hidden">
        <div class="section-header">
          <h2>Clients</h2>
          <div class="actions">
            <button id="create-client-btn" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus">
                <path d="M5 12h14"/>
                <path d="M12 5v14"/>
              </svg>
              New Client
            </button>
            <button id="import-clients-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" x2="12" y1="15" y2="3"/>
              </svg>
              Import
            </button>
            <button id="export-clients-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-upload">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" x2="12" y1="3" y2="15"/>
              </svg>
              Export
            </button>
          </div>
        </div>
        
        <div class="client-list-container">
          <div id="client-list" class="client-list">
            <!-- Clients will be dynamically populated here -->
            <p id="no-clients-message" class="empty-message">No clients yet. Add your first client!</p>
          </div>
        </div>
      </section>

      <!-- Settings View -->
      <section id="settings-view" class="view hidden">
        <div class="section-header">
          <h2>Settings</h2>
        </div>
        
        <div class="settings-form">
          <form id="settings-form">
            <div class="form-section">
              <h3>Company Information</h3>
              <div class="form-group">
                <label for="company-name">Company Name</label>
                <input type="text" id="company-name" name="companyName" placeholder="Your Company">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="company-email">Email</label>
                  <input type="email" id="company-email" name="companyEmail" placeholder="contact@yourcompany.com">
                </div>
                <div class="form-group">
                  <label for="company-phone">Phone</label>
                  <input type="tel" id="company-phone" name="companyPhone" placeholder="+1 (555) 123-4567">
                </div>
              </div>
              <div class="form-group">
                <label for="company-address">Address</label>
                <textarea id="company-address" name="companyAddress" placeholder="123 Business St, City, State, ZIP"></textarea>
              </div>
            </div>

            <div class="form-section">
              <h3>Invoice Settings</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="currency">Default Currency</label>
                  <select id="currency" name="currency">
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (€)</option>
                    <option value="GBP">GBP (£)</option>
                    <option value="JPY">JPY (¥)</option>
                    <option value="CAD">CAD ($)</option>
                    <option value="AUD">AUD ($)</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="tax-rate">Default Tax Rate (%)</label>
                  <input type="number" id="tax-rate" name="taxRate" min="0" max="100" step="0.01" placeholder="0.00">
                </div>
              </div>
              <div class="form-group">
                <label for="payment-terms">Default Payment Terms</label>
                <input type="text" id="payment-terms" name="paymentTerms" placeholder="Due within 30 days">
              </div>
              <div class="form-group">
                <label for="invoice-notes">Default Invoice Notes</label>
                <textarea id="invoice-notes" name="invoiceNotes" placeholder="Thank you for your business!"></textarea>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Save Settings</button>
            </div>
          </form>
        </div>
      </section>

      <!-- Invoice Editor View -->
      <section id="invoice-editor" class="view hidden">
        <div class="section-header">
          <h2 id="invoice-editor-title">New Invoice</h2>
          <div class="actions">
            <button id="invoice-preview-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye">
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              Preview
            </button>
            <button id="save-invoice-btn" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
              </svg>
              Save Invoice
            </button>
            <button id="cancel-invoice-btn" class="btn btn-outline btn-danger">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                <path d="M18 6 6 18"/>
                <path d="m6 6 12 12"/>
              </svg>
              Cancel
            </button>
          </div>
        </div>
        
        <form id="invoice-form" class="invoice-form">
          <div class="form-section">
            <div class="form-row">
              <div class="form-group">
                <label for="invoice-number">Invoice #</label>
                <input type="text" id="invoice-number" name="invoiceNumber" required>
              </div>
              <div class="form-group">
                <label for="invoice-date">Date</label>
                <input type="date" id="invoice-date" name="invoiceDate" required>
              </div>
              <div class="form-group">
                <label for="invoice-due-date">Due Date</label>
                <input type="date" id="invoice-due-date" name="invoiceDueDate" required>
              </div>
            </div>
          </div>

          <div class="form-row client-section">
            <div class="form-section">
              <h3>Bill From</h3>
              <div id="company-details" class="company-details">
                <!-- Company details will be populated from settings -->
                <p class="empty-message">Please configure company details in Settings</p>
              </div>
            </div>

            <div class="form-section">
              <h3>Bill To</h3>
              <div class="form-row">
                <div class="form-group client-select-container">
                  <label for="client-select">Select Client</label>
                  <select id="client-select" name="clientId">
                    <option value="">-- Select a client --</option>
                    <!-- Client options will be dynamically populated -->
                  </select>
                </div>
                <div class="form-group">
                  <button type="button" id="add-new-client-btn" class="btn btn-sm btn-outline">Add New Client</button>
                </div>
              </div>
              <div id="client-details" class="client-details hidden">
                <!-- Selected client details will appear here -->
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Invoice Items</h3>
            <div class="invoice-items-table">
              <table id="invoice-items">
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="invoice-items-body">
                  <!-- Item rows will be added here dynamically -->
                </tbody>
              </table>
              <button type="button" id="add-item-btn" class="btn btn-sm btn-outline mt-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus">
                  <path d="M5 12h14"/>
                  <path d="M12 5v14"/>
                </svg>
                Add Item
              </button>
            </div>
          </div>

          <div class="form-section totals-section">
            <div class="totals-container">
              <div class="totals-row">
                <span>Subtotal:</span>
                <span id="invoice-subtotal">$0.00</span>
              </div>
              <div class="totals-row">
                <div class="tax-row">
                  <label for="invoice-tax-rate">Tax Rate:</label>
                  <div class="tax-input">
                    <input type="number" id="invoice-tax-rate" name="taxRate" min="0" max="100" step="0.01" value="0"> %
                  </div>
                </div>
                <span id="invoice-tax-amount">$0.00</span>
              </div>
              <div class="totals-row">
                <div class="discount-row">
                  <label for="invoice-discount">Discount:</label>
                  <div class="discount-input">
                    <input type="number" id="invoice-discount" name="discount" min="0" step="0.01" value="0">
                    <select id="discount-type" name="discountType">
                      <option value="fixed">$</option>
                      <option value="percentage">%</option>
                    </select>
                  </div>
                </div>
                <span id="invoice-discount-amount">$0.00</span>
              </div>
              <div class="totals-row total">
                <span>Total:</span>
                <span id="invoice-total">$0.00</span>
              </div>
            </div>
          </div>

          <div class="form-section">
            <div class="form-group">
              <label for="invoice-notes">Notes</label>
              <textarea id="invoice-notes-input" name="notes" placeholder="Payment terms, thank you notes, etc."></textarea>
            </div>
          </div>
        </form>
      </section>

      <!-- Client Editor View -->
      <section id="client-editor" class="view hidden">
        <div class="section-header">
          <h2 id="client-editor-title">New Client</h2>
          <div class="actions">
            <button id="save-client-btn" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
              </svg>
              Save Client
            </button>
            <button id="cancel-client-btn" class="btn btn-outline btn-danger">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x">
                <path d="M18 6 6 18"/>
                <path d="m6 6 12 12"/>
              </svg>
              Cancel
            </button>
          </div>
        </div>
        
        <form id="client-form" class="client-form">
          <div class="form-section">
            <div class="form-group">
              <label for="client-name">Client Name</label>
              <input type="text" id="client-name" name="name" required>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="client-email">Email</label>
                <input type="email" id="client-email" name="email" required>
              </div>
              <div class="form-group">
                <label for="client-phone">Phone</label>
                <input type="tel" id="client-phone" name="phone">
              </div>
            </div>
            
            <div class="form-group">
              <label for="client-address">Address</label>
              <textarea id="client-address" name="address" required></textarea>
            </div>
          </div>
        </form>
      </section>

      <!-- Invoice Preview View -->
      <section id="invoice-preview" class="view hidden">
        <div class="section-header">
          <h2>Invoice Preview</h2>
          <div class="actions">
            <button id="generate-pdf-btn" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text">
                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" x2="8" y1="13" y2="13"/>
                <line x1="16" x2="8" y1="17" y2="17"/>
                <line x1="10" x2="8" y1="9" y2="9"/>
              </svg>
              Generate PDF
            </button>
            <button id="edit-invoice-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-edit">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
              Edit
            </button>
            <button id="back-to-invoices-btn" class="btn btn-outline">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left">
                <path d="m12 19-7-7 7-7"/>
                <path d="M19 12H5"/>
              </svg>
              Back to Invoices
            </button>
          </div>
        </div>
        
        <div id="invoice-preview-container" class="invoice-preview-container">
          <!-- Invoice preview will be rendered here -->
        </div>
      </section>
    </div>
  </main>

  <!-- Modals -->
  <div id="import-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="import-modal-title">Import Data</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="import-file">Select a JSON file</label>
          <input type="file" id="import-file" accept=".json">
        </div>
        <div id="import-preview" class="import-preview hidden">
          <h4>Preview:</h4>
          <p id="import-preview-count"></p>
          <div id="import-preview-data"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="import-confirm-btn" class="btn btn-primary" disabled>Import</button>
        <button class="btn btn-outline cancel-modal">Cancel</button>
      </div>
    </div>
  </div>

  <div id="confirm-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Confirm Action</h3>
        <button class="close-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p id="confirm-message">Are you sure you want to proceed?</p>
      </div>
      <div class="modal-footer">
        <button id="confirm-yes-btn" class="btn btn-danger">Yes, proceed</button>
        <button id="confirm-no-btn" class="btn btn-outline">Cancel</button>
      </div>
    </div>
  </div>

  <div id="notification" class="notification">
    <div class="notification-content">
      <span id="notification-message"></span>
      <button class="close-notification">&times;</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script src="js/db.js"></script>
  <script src="js/models.js"></script>
 
  <script src="js/clients.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/pdf-generator.js"></script>

  <script src="js/invoices.js"></script>
  <script src="js/app.js"></script>
   <script src="js/ui.js"></script>

</body>
</html>
